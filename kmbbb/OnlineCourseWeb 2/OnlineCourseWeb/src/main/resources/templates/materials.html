<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>Course Materials</title>
    <link rel="stylesheet" th:href="@{/css/style.css}"/>
</head>
<body>
<h1 th:text="${course.title}"></h1>
<a th:href="@{/OnlineCourseWeb/dashboard}">Back to Dashboard</a>
<div th:if="${user.role == 'ROLE_TEACHER'}">
    <form method="post" th:action="@{/OnlineCourseWeb/materials/add}">
        <input type="hidden" name="courseId" th:value="${course.id}"/>
        <label>Add Material: <input type="text" name="fileName"/></label>
        <input type="submit" value="Upload"/>
    </form>
</div>
<h2>Materials</h2>
<ul>
    <li th:each="material : ${materials}">
        <span th:text="${material.fileName}"></span>
        <div th:if="${user.role == 'ROLE_STUDENT'}">
            <form method="post" th:action="@{/OnlineCourseWeb/vote}">
                <input type="hidden" name="materialId" th:value="${material.id}"/>
                <input type="hidden" name="voteValue" value="1"/>
                <input type="submit" value="Upvote"/>
            </form>
            <form method="post" th:action="@{/OnlineCourseWeb/vote}">
                <input type="hidden" name="materialId" th:value="${material.id}"/>
                <input type="hidden" name="voteValue" value="-1"/>
                <input type="submit" value="Downvote"/>
            </form>
            <form method="post" th:action="@{/OnlineCourseWeb/comment}">
                <input type="hidden" name="materialId" th:value="${material.id}"/>
                <label>Comment: <input type="text" name="content"/></label>
                <input type="submit" value="Add"/>
            </form>
        </div>
    </li>
</ul>
<h2>Comments</h2>
<ul>
    <li th:each="comment : ${comments}" th:text="${comment.content + ' - ' + comment.createdAt}"></li>
</ul>
</body>
</html>